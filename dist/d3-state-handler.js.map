{"version":3,"sources":["../src/d3-state-handler.js"],"names":[],"mappings":"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","file":"d3-state-handler.js","sourcesContent":["// Error handling\nfunction FinalState(message) {\n    \"use strict\";\n    this.name = 'FinalStateError';\n    this.message = message || \"There are no more states to advance to\";\n    this.stack = (new Error()).stack;\n}\nFinalState.prototype = Object.create(Error.prototype);\nFinalState.prototype.constructor = FinalState;\n\nfunction FirstState(message) {\n    \"use strict\";\n    this.name = 'FirstStateError';\n    this.message = message || \"There are no states before this one\";\n    this.stack = (new Error()).stack;\n}\nFirstState.prototype = Object.create(Error.prototype);\nFirstState.prototype.constructor = FirstState;\n\nconst StateHandler = function StateHandler(opts) {\n    \"use strict\";\n    let currentIndex = 0;\n    let states = [];\n    let options = opts || {\n            loop: false // specifies whether states should loop from end - beginning and vice versa\n        };\n    let data = options.data || {};\n\n    let currentState = () => {\n        return states[currentIndex];\n    };\n\n    let add = (state) => {\n        state['__index'] = currentIndex;\n        if (!state.name) state.name = String(currentIndex);\n        states.push(state);\n\n        return this;\n    };\n\n    let remove = (name) => {\n        let index = states.indexOf(states.filter(function(state) {\n            return state.name === String(name);\n        }));\n\n        if (index > -1) {\n            array.splice(index, 1);\n        }\n\n        return this;\n    };\n\n    let next = () => {\n        \"use strict\";\n        // Call nextOut on the current state if it exists\n        if (typeof currentState().nextOut === 'function') currentState().nextOut.call(data);\n\n        // Set the current state to the next index. Loop if specified.\n        if (currentIndex + 1 < states.length) { currentIndex += 1; }\n        else if (options.loop) { currentIndex = 0; }\n        else { throw new FinalState(); }\n\n        // Call nextIn on the new current state\n        if (typeof currentState().nextIn === 'function') currentState().nextIn.call(data);\n\n        // Call run on the new current state\n        if (typeof currentState().run === 'function') currentState().run();\n        return this;\n    };\n\n    let prev = () => {\n        \"use strict\";\n        // Call prevOut on the current state if it exists\n        if (typeof currentState().prevOut === 'function') currentState().prevOut.call(data);\n\n        // Set the current state to the previous index. Loop if specified.\n        if (currentIndex - 1 >= 0) { currentIndex -= 1; }\n        else if (options.loop) { currentIndex = states.length; }\n        else { throw new FirstState(); }\n\n        // Call prevIn on the new current state\n        if (typeof currentState().nextIn === 'function') currentState().nextIn.call(data);\n\n        // Call run on new current state;\n        if (typeof currentState().run === 'function') currentState().run();\n        return this;\n    };\n\n    return {\n        next: next,\n        add: add,\n        currentState: currentState,\n        prev: prev,\n        remove: remove\n    }\n};\n\nexport default StateHandler;"]}