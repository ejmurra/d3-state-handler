{"version":3,"sources":["../src/d3-state-handler.js"],"names":[],"mappings":"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","file":"d3-state-handler.js","sourcesContent":["// polyfill object assign\nif (!Object.assign) {\n    Object.defineProperty(Object, 'assign', {\n        enumerable: false,\n        configurable: true,\n        writable: true,\n        value: function(target) {\n            'use strict';\n            if (target === undefined || target === null) {\n                throw new TypeError('Cannot convert first argument to object');\n            }\n\n            var to = Object(target);\n            for (var i = 1; i < arguments.length; i++) {\n                var nextSource = arguments[i];\n                if (nextSource === undefined || nextSource === null) {\n                    continue;\n                }\n                nextSource = Object(nextSource);\n\n                var keysArray = Object.keys(nextSource);\n                for (var nextIndex = 0, len = keysArray.length; nextIndex < len; nextIndex++) {\n                    var nextKey = keysArray[nextIndex];\n                    var desc = Object.getOwnPropertyDescriptor(nextSource, nextKey);\n                    if (desc !== undefined && desc.enumerable) {\n                        to[nextKey] = nextSource[nextKey];\n                    }\n                }\n            }\n            return to;\n        }\n    });\n}\n\n// Error handling\nfunction FinalState(message) {\n    \"use strict\";\n    this.name = 'FinalStateError';\n    this.message = message || \"There are no more states to advance to\";\n    this.stack = (new Error()).stack;\n}\nFinalState.prototype = Object.create(Error.prototype);\nFinalState.prototype.constructor = FinalState;\n\nfunction FirstState(message) {\n    \"use strict\";\n    this.name = 'FirstStateError';\n    this.message = message || \"There are no states before this one\";\n    this.stack = (new Error()).stack;\n}\nFirstState.prototype = Object.create(Error.prototype);\nFirstState.prototype.constructor = FirstState;\n\nconst StateHandler = function StateHandler(opts) {\n    \"use strict\";\n    let currentIndex = 0;\n    let states = [];\n    let options = opts || {\n            loop: false // specifies whether states should loop from end - beginning and vice versa\n        };\n    let data = options.data || {};\n\n    let currentState = () => {\n        Object.assign(states[currentIndex].data,data)\n        return states[currentIndex];\n    };\n\n    let add = (state) => {\n        let index = states.length;\n        state.data = Object.assign({},data);\n        state['__index'] = index;\n        if (!state.name) state.name = String(index);\n        states.push(state);\n\n        return this;\n    };\n\n    let remove = (name) => {\n        let index = states.indexOf(states.filter(function(state) {\n            return state.name === String(name);\n        }));\n\n        if (index > -1) {\n            array.splice(index, 1);\n        }\n\n        return this;\n    };\n\n    let next = () => {\n        \"use strict\";\n        // Call nextOut on the current state if it exists\n        if (typeof currentState().nextOut === 'function') currentState().nextOut.call(data);\n\n        // Set the current state to the next index. Loop if specified.\n        if (currentIndex + 1 < states.length) { currentIndex += 1; }\n        else if (options.loop) { currentIndex = 0; }\n        else { throw new FinalState(); }\n\n        // Call nextIn on the new current state\n        if (typeof currentState().nextIn === 'function') currentState().nextIn.call(data);\n\n        // Call run on the new current state\n        if (typeof currentState().run === 'function') currentState().run.call(data);\n        return this;\n    };\n\n    let prev = () => {\n        \"use strict\";\n        // Call prevOut on the current state if it exists\n\n        if (typeof currentState().prevOut === 'function') currentState().prevOut.call(data);\n\n        // Set the current state to the previous index. Loop if specified.\n        if (currentIndex - 1 >= 0) { currentIndex -= 1; }\n        else if (options.loop) { currentIndex = states.length; }\n        else { throw new FirstState(); }\n\n        // Call prevIn on the new current state\n        if (typeof currentState().prevIn === 'function') currentState().prevIn.call(data);\n\n        // Call run on new current state;\n        if (typeof currentState().run === 'function') currentState().run.call(data);\n        return this;\n    };\n\n    return {\n        next: next,\n        add: add,\n        currentState: currentState,\n        prev: prev,\n        remove: remove\n    }\n};\n\nexport default StateHandler;"]}