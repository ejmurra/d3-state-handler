var d3_state_handler={};d3_state_handler=function(e){function t(e,t,n){for(var r=0,a=e.length;a>r;r++)if(e[r][n]===t)return r;return-1}Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(e){"use strict";if(void 0===e||null===e)throw new TypeError("Cannot convert first argument to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(void 0!==r&&null!==r){r=Object(r);for(var a=Object.keys(r),o=0,s=a.length;s>o;o++){var i=a[o],m=Object.getOwnPropertyDescriptor(r,i);void 0!==m&&m.enumerable&&(t[i]=r[i])}}}return t}});var n=function(e,n){var r=this,a=0,o=[],s=function(e){return e},i=n||{loop:!1,init:s,jumpState:{},data:{},load:s},m=i.jumpState,u=i.data,c={},f=function(e){var t=!c[e.name];if(!t)throw new Error("State "+e.name+" already exists!");return c[e.name]={render:e.render,fromNext:e.fromNext||s,fromPrev:e.fromPrev||s,toNext:e.toNext||s,toPrev:e.toPrev||s,jumpOut:e.jumpOut||s,jumpIn:e.jumpIn||s,resize:e.resize||e.render},o.length&&(o[o.length-1].next=e.name),e={prev:o.length?o[o.length-1].name:null,name:e.name,next:null,url:"#"+r.name},o.push(e),e},g=function(t){t.name=t.name||String(o.length),t=f(t),1===o.length&&e.history.pushState(t,t.name,"#"+t.name)},v=function(){return o[a]},l=function(e){var t=Object.assign({},u);t=e?e(t):i.init(t),t=o[0].render(t),u=Object.assign({},u,t)},h=function(e){var n=t(o,e,"name");n>-1&&array.splice(n,1)},j=function(n){var r=t(o,n,"name"),s=o[r];if(!(r>-1))throw new Error("State "+n+" does not exist");var f=i.load(Object.assign({},u));f=c[s.name].jumpIn(Object.assign({},m)),f=c[s.name].render(f),u=Object.assign({},u,f),a=r,e.history.pushState(s,s.name,"#"+s.name)},d=function(n){var r=t(o,n,"name"),s=o[a],i=o[r];if(!(r>-1))throw new Error("State "+n+" does not exist");var f=Object.assign({},u);f=c[s.name].jumpOut(f),f=c[i.name].jumpIn(Object.assign({},m)),f=c[i.name].render(f),u=Object.assign({},u,f),a=r,e.history.pushState(i,i.name,"#"+i.name)},b=function(){var n=o[a],r=n.next;if(!r)throw new Error("No state after current state ("+JSON.stringify(n)+")");var s=o[t(o,r,"name")],i=Object.assign({},u);i=c[n.name].toNext(i),i=c[s.name].fromPrev(i),i=c[s.name].render(i),u=Object.assign({},u,i),a=a+1<o.length?a+1:0,e.history.pushState(s,s.name,"#"+s.name)},O=function(){var n=o[a],r=n.prev;if(!r)throw new Error("No state before current state ("+JSON.stringify(n)+")");var s=o[t(o,r,"name")],i=Object.assign({},u);i=c[n.name].toPrev(i),i=c[s.name].fromNext(i),i=c[s.name].render(i),u=Object.assign({},u,i),a=a-1>=0?a-1:o.length-1,e.history.pushState(s,s.name,"name")},p=function(){var e=Object.assign({},u);e=o[a].resize(e),u=Object.assign({},u,e)},w={next:b,add:g,currentState:v,prev:O,remove:h,resize:p,load:j,jumpTo:d,start:l};return w};return e=n}(d3_state_handler);